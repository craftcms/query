var $form = $('#query-form'),
  $submit = $('#query-submit'),
  $spinner = $('#query-spinner'),
  $sql = $('#query-sql'),
  $results = $('#query-result'),
  executing = !1;
$sql.on('keydown', function (e) {
  e.keyCode === Garnish.RETURN_KEY &&
    Garnish.isCtrlKeyPressed(e) &&
    $form.submit();
}),
  $form.on('submit', function (e) {
    e.preventDefault(),
      executing ||
        ($submit.addClass('active'),
        $spinner.removeClass('hidden'),
        (executing = !0),
        Craft.postActionRequest(
          'query/default/execute',
          {sql: $sql.val()},
          function (e, t) {
            if (
              ($submit.removeClass('active'),
              $spinner.addClass('hidden'),
              (executing = !1),
              'success' == t)
            ) {
              var r;
              if (e.success) {
                if (e.result.length) {
                  var s =
                    1 === e.result.length
                      ? Craft.t('query', '1 result:')
                      : Craft.t('query', '{num} results:', {
                          num: e.formattedTotal,
                        });
                  r =
                    '<p>' + s + '</p><table class="data fullwidth"><thead><tr>';
                  for (var l in e.result[0])
                    r += '<th scope="col">' + l + '</th>';
                  r += '</tr></thead></tbody>';
                  for (var u = 0; u < e.result.length; u++) {
                    r += '<tr>';
                    for (var a in e.result[u])
                      (r += '<td style="vertical-align: top"><pre>'),
                        null === e.result[u][a]
                          ? (r += '<span class="extralight">NULL</span>')
                          : (r += e.result[u][a]),
                        (r += '</pre></td>');
                    r += '</tr>';
                  }
                  r += '<tbody></table>';
                }
              } else r = '<p class="error">' + e.error + '</p>';
              $results.html(r);
            }
          }
        ));
  });
//# sourceMappingURL=query.min.js.map
